extends ../default

block content
	.ui.container.fluid
				.ui.segment
					h1.ui.blue.dividing Lecturas de entradas
					.ui.container
						h2.header Fase 1
						.ui.two.column.row
							.column
								div#graph_1
								script.
									$(function () {
									//  alert(mydata[0].temp);
										$(document).ready(function () {
											Highcharts.setOptions({
												global: {
													useUTC: false
												}
											});
											$('#graph_1').highcharts({
												chart: {
													type: 'spline',
													marginRight: 10,
													events: {
														load: function requestData() {
															// set up the updating of the chart each second
															var series = this.series[0];
															var shift = false;
															setInterval(function () {
																shift = series.data.length > 20;
																//$.getJSON('/test.json', function (data) {
																$.getJSON('/livedata', function(data){
																	var y =  parseFloat(data.y);
																	var x =  data.x;
																	series.addPoint( [x,y], true, shift);
																});
															}, 1000);
														}
													}
												},
												title: {
													text: 'Fase 1'
												},
												xAxis: {
													type: 'datetime',
													tickPixelInterval: 150
												},
												yAxis: {
													title: {
														text: 'Voltaje (V)'
													}
												},
												tooltip: {
													formatter: function () {
														return '<b>' + this.series.name + '</b><br/>' +
														Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
														Highcharts.numberFormat(this.y, 2);
													}
												},
												series: [{
													name: 'Voltaje',
													data: []
												}]
											});
										});
									});